# 配置文件说明

## 📝 概述

项目现在使用 `.env` 文件来管理敏感配置信息，不再在代码中硬编码。

## 🔧 配置文件

### `.env` 文件

在项目根目录创建 `.env` 文件，包含以下配置：

```bash
# Telegram Bot 配置
API_ID=21332425
API_HASH=f5d0cddc784e3a7a09ea9714ed01f238
BOT_TOKEN=8520376411:AAHGZMmI-oROPyrxBmDTo7_OCtpy8kHWORc

# 管理员 Telegram 用户 ID (可以多个，用逗号分隔)
ADMIN_IDS=7935612165

# 是否使用代理
USE_PROXY=False

# 代理配置 (如果 USE_PROXY=True)
PROXY_TYPE=socks5
PROXY_HOST=127.0.0.1
PROXY_PORT=7897
```

### `.env.example` 文件

这是配置文件的示例模板，可以复制为 `.env` 并填入实际值。

## 🔐 安全说明

1. **`.env` 文件已添加到 `.gitignore`**，不会被提交到 Git 仓库
2. **不要将 `.env` 文件分享给他人**，包含敏感信息
3. **生产环境**建议使用环境变量而不是文件

## 📋 配置项说明

### API_ID 和 API_HASH

从 https://my.telegram.org 获取：
1. 使用手机号登录
2. 进入 "API development tools"
3. 创建应用后获得

### BOT_TOKEN

从 Telegram 的 `@BotFather` 获取：
1. 在 Telegram 中搜索 `@BotFather`
2. 发送 `/newbot` 创建新机器人
3. 按提示操作，最后获得 Bot Token

### ADMIN_IDS

管理员的 Telegram 用户 ID：
- 可以填写多个，用逗号分隔，如：`ADMIN_IDS=123456789,987654321`
- 如何获取自己的 ID：在 Telegram 中搜索 `@userinfobot`，发送任意消息即可看到

### USE_PROXY

是否使用代理连接 Telegram：
- `False` - 不使用代理（服务器部署通常为 False）
- `True` - 使用代理（中国大陆可能需要）

### 代理配置

当 `USE_PROXY=True` 时生效：
- `PROXY_TYPE` - 代理类型：`socks5`、`socks4` 或 `http`
- `PROXY_HOST` - 代理服务器地址
- `PROXY_PORT` - 代理服务器端口

## 🚀 使用方法

### 1. 创建配置文件

```bash
# 复制示例文件
cp .env.example .env

# 编辑配置文件
nano .env  # 或使用其他编辑器
```

### 2. 填写配置

编辑 `.env` 文件，填入你的实际配置值。

### 3. 运行项目

配置会自动从 `.env` 文件加载：

```bash
python3 -m app.main
```

## 🔄 配置优先级

配置读取优先级（从高到低）：
1. **环境变量** - 系统环境变量
2. **`.env` 文件** - 项目根目录的 `.env` 文件
3. **默认值** - 代码中的默认值（不推荐使用）

## ⚠️ 注意事项

1. **首次部署**：确保创建 `.env` 文件并填入正确的配置
2. **配置更新**：修改 `.env` 文件后需要重启应用才能生效
3. **多环境部署**：不同环境（开发/生产）可以使用不同的 `.env` 文件
4. **备份配置**：建议将配置信息保存在安全的地方，但不要提交到 Git

## 📝 示例

### 开发环境

```bash
# .env
API_ID=12345678
API_HASH=abcdef1234567890
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
ADMIN_IDS=123456789
USE_PROXY=True
PROXY_HOST=127.0.0.1
PROXY_PORT=7897
```

### 生产环境

```bash
# .env
API_ID=12345678
API_HASH=abcdef1234567890
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
ADMIN_IDS=123456789,987654321
USE_PROXY=False
```

## 🛠️ 故障排查

### 配置未生效

1. 检查 `.env` 文件是否存在
2. 检查文件路径是否正确（应在项目根目录）
3. 检查配置项名称是否正确
4. 重启应用

### 配置错误

如果配置有误，应用启动时会报错。检查：
- API_ID 是否为数字
- BOT_TOKEN 格式是否正确
- ADMIN_IDS 是否为数字列表

